<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <title>Admin Dashboard ‚Äî Vivid Vision</title>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <link rel="stylesheet" href="/admin.css" />
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap">
</head>

<body>
  <div id="fire-loader">
    <div class="fire-text">ADMIN PANEL</div>
  </div>

  <!-- Sidebar -->
  <aside class="sidebar">
    <div class="brand">
      <img src="https://www.vividvision.lk/l.png" alt="Logo" class="brand-logo">
      <span>VIVID VISION</span>
    </div>

    <nav class="nav-menu" id="tabs">
      <div class="tab active" data-tab="users">
        <span>Users</span>
      </div>
      <div class="tab" data-tab="products">
        <span>Products</span>
      </div>
      <div class="tab" data-tab="comments">
        <span>Comments</span>
      </div>
      <div class="tab" data-tab="statics">
        <span>Statistics</span>
      </div>
      <div class="tab" data-tab="banned">
        <span>Banned</span>
      </div>
      <div class="tab" data-tab="converter">
        <span>Image Converter</span>
      </div>
      <div class="tab" data-tab="developer">
        <span>Developer</span>
      </div>
    </nav>

    <div class="sidebar-footer">
      <button id="logoutBtn" class="vv-btn ghost" style="width:100%">Logout</button>
    </div>
  </aside>

  <!-- Main Content -->
  <main class="main-content">
    <header class="top-bar">
      <div class="page-title">Dashboard</div>
      <div class="top-actions">
        <button id="refreshAll" class="vv-btn ghost">Refresh Data</button>
      </div>
    </header>

    <div class="content-scroll" id="content">

      <!-- USERS PANEL -->
      <div class="panel" id="panel-users">
        <div class="flex-row">
          <input id="userSearch" class="input" placeholder="Search users by name or email..." />
          <div style="display:flex; gap:10px; align-items:center;">
            <button id="userPrev" class="vv-btn ghost">Prev</button>
            <span id="userPageInfo" class="text-muted" style="font-size:13px; min-width:60px; text-align:center;">1 /
              1</span>
            <button id="userNext" class="vv-btn ghost">Next</button>
          </div>
        </div>
        <div class="table-container">
          <table class="data-table">
            <thead>
              <tr>
                <th>User</th>
                <th>Email</th>
                <th>Role</th>
                <th>Joined</th>
                <th style="text-align:right">Actions</th>
              </tr>
            </thead>
            <tbody id="usersTbody"></tbody>
          </table>
        </div>
      </div>

      <!-- PRODUCTS PANEL -->
      <div class="panel" id="panel-products" style="display:none">
        <div class="flex-row">
          <input id="productSearch" class="input" placeholder="Search products..." />
          <button id="createProductBtn" class="vv-btn">Create Product</button>
        </div>
        <div class="table-container">
          <table>
            <thead>
              <tr>
                <th>Image</th>
                <th>Name</th>
                <th>Price</th>
                <th>Tag</th>
                <th style="text-align:right">Actions</th>
              </tr>
            </thead>
            <tbody id="productsTbody"></tbody>
          </table>
        </div>
      </div>

      <!-- COMMENTS PANEL -->
      <div class="panel" id="panel-comments" style="display:none">
        <div class="flex-row">
          <input id="commentFilter" class="input" placeholder="Filter comments..." />
          <button id="refreshComments" class="vv-btn ghost">Refresh</button>
        </div>
        <div class="table-container">
          <table>
            <thead>
              <tr>
                <th>User</th>
                <th>Comment</th>
                <th>Product</th>
                <th>Date</th>
                <th style="text-align:right">Actions</th>
              </tr>
            </thead>
            <tbody id="commentsTbody"></tbody>
          </table>
        </div>
      </div>

      <!-- STATISTICS PANEL -->
      <div class="panel" id="panel-statics" style="display:none">
        <div class="card-grid" id="statsWrap">
          <!-- JS injects stats here, but let's structure the JS output to match cards -->
          <!-- We might need to tweak admin.js slightly to render nicely structured HTML or rely on CSS -->
          <div class="stat-card">Loading stats...</div>
        </div>
      </div>

      <!-- BANNED PANEL -->
      <div class="panel" id="panel-banned" style="display:none">
        <div class="table-container">
          <table>
            <thead>
              <tr>
                <th>User Snapshot</th>
                <th>Reason</th>
                <th>Banned At</th>
                <th>Type</th>
                <th style="text-align:right">Actions</th>
              </tr>
            </thead>
            <tbody id="bannedTbody"></tbody>
          </table>
        </div>
      </div>

      <!-- IMAGE CONVERTER PANEL -->
      <div class="panel" id="panel-converter" style="display:none">
        <div class="stat-card" style="max-width: 900px;">
          <h3 style="margin-top:0">üì∏ Image Converter & Optimizer</h3>
          <p style="color:var(--text-muted); font-size:13px; margin-bottom:20px;">
            Convert and optimize your product images to the recommended 1200√ó900px (4:3 ratio) format.
          </p>

          <div style="display:grid; grid-template-columns: 1fr 1fr; gap:20px; margin-bottom:20px;">
            <!-- Upload Area -->
            <div>
              <label style="display:block; margin-bottom:8px; font-size:13px; font-weight:600;">Upload Images</label>
              <div id="dropZone" style="
                border: 2px dashed rgba(245, 200, 76, 0.3);
                border-radius: 12px;
                padding: 40px 20px;
                text-align: center;
                cursor: pointer;
                transition: all 0.3s;
                background: rgba(245, 200, 76, 0.05);
              ">
                <div style="font-size:48px; margin-bottom:12px;">üìÅ</div>
                <div style="font-size:14px; font-weight:600; margin-bottom:6px;">Drop images here</div>
                <div style="font-size:12px; color:var(--text-muted);">or click to browse</div>
                <input type="file" id="converterInput" accept="image/*" multiple style="display:none;">
              </div>
            </div>

            <!-- Settings -->
            <div>
              <label style="display:block; margin-bottom:8px; font-size:13px; font-weight:600;">Conversion
                Settings</label>
              <div style="display:flex; flex-direction:column; gap:12px;">
                <label style="display:flex; align-items:center; gap:8px;">
                  <input type="radio" name="conversionMode" value="1200x900" checked>
                  <span style="font-size:13px;">1200√ó900px (Recommended 4:3)</span>
                </label>
                <label style="display:flex; align-items:center; gap:8px;">
                  <input type="radio" name="conversionMode" value="800x600">
                  <span style="font-size:13px;">800√ó600px (Smaller 4:3)</span>
                </label>
                <label style="display:flex; align-items:center; gap:8px;">
                  <input type="radio" name="conversionMode" value="1600x1200">
                  <span style="font-size:13px;">1600√ó1200px (Large 4:3)</span>
                </label>
                <label style="display:flex; align-items:center; gap:8px;">
                  <input type="radio" name="conversionMode" value="custom">
                  <span style="font-size:13px;">Custom Size</span>
                </label>
                <div id="customSizeInputs" style="display:none; padding-left:24px; gap:8px;">
                  <input type="number" id="customWidth" class="input" placeholder="Width" style="width:80px;"
                    value="1200">
                  <span>√ó</span>
                  <input type="number" id="customHeight" class="input" placeholder="Height" style="width:80px;"
                    value="900">
                </div>

                <label style="display:block; margin-top:8px;">
                  <span style="font-size:13px; display:block; margin-bottom:4px;">Quality (0-100%)</span>
                  <input type="range" id="qualitySlider" min="50" max="100" value="85" style="width:100%;">
                  <span id="qualityValue" style="font-size:12px; color:var(--accent);">85%</span>
                </label>
              </div>
            </div>
          </div>

          <!-- Preview Area -->
          <div id="previewArea" style="display:none; margin-top:20px;">
            <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:12px;">
              <h4 style="margin:0;">Preview & Download</h4>
              <button id="downloadAllBtn" class="vv-btn" style="display:none;">Download All</button>
            </div>
            <div id="previewGrid" style="
              display:grid;
              grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
              gap:16px;
            "></div>
          </div>
        </div>
      </div>

      <!-- DEVELOPER PANEL -->
      <div class="panel" id="panel-developer" style="display:none">
        <div class="stat-card" style="max-width: 600px;">
          <h3 style="margin-top:0">Developer Tools</h3>
          <div style="display:flex; flex-direction:column; gap:16px;">
            <label>
              <div style="margin-bottom:6px; font-size:13px; color:var(--text-muted);">Discord Webhook URL</div>
              <input id="devWebhook" class="input" style="width:100%"
                placeholder="https://discord.com/api/webhooks/..." />
            </label>
            <label>
              <div style="margin-bottom:6px; font-size:13px; color:var(--text-muted);">Test Message</div>
              <textarea id="devMessage" class="input" style="width:100%" rows="4"></textarea>
            </label>
            <button id="sendDev" class="vv-btn">Send Test Hook</button>
          </div>
        </div>
      </div>

    </div>
  </main>

  <script src="/modals.js"></script>
  <script src="/admin.js" defer></script>
</body>

</html>